!function(t){var i={};function e(s){if(i[s])return i[s].exports;var h=i[s]={i:s,l:!1,exports:{}};return t[s].call(h.exports,h,h.exports,e),h.l=!0,h.exports}e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:s})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(e.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var h in t)e.d(s,h,function(i){return t[i]}.bind(null,h));return s},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=1)}([function(t,i,e){var s;t.exports=((s=function(){function t(t){return h.appendChild(t.dom),t}function i(t){for(var i=0;i<h.children.length;i++)h.children[i].style.display=i===t?"block":"none";e=t}var e=0,h=document.createElement("div");h.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",h.addEventListener("click",(function(t){t.preventDefault(),i(++e%h.children.length)}),!1);var n=(performance||Date).now(),o=n,r=0,a=t(new s.Panel("FPS","#0ff","#002")),l=t(new s.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=t(new s.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:h,addPanel:t,showPanel:i,begin:function(){n=(performance||Date).now()},end:function(){r++;var t=(performance||Date).now();if(l.update(t-n,200),t>o+1e3&&(a.update(1e3*r/(t-o),100),o=t,r=0,c)){var i=performance.memory;c.update(i.usedJSHeapSize/1048576,i.jsHeapSizeLimit/1048576)}return t},update:function(){n=this.end()},domElement:h,setMode:i}}).Panel=function(t,i,e){var s=1/0,h=0,n=Math.round,o=n(window.devicePixelRatio||1),r=80*o,a=48*o,l=3*o,c=2*o,d=3*o,u=15*o,f=74*o,y=30*o,p=document.createElement("canvas");p.width=r,p.height=a,p.style.cssText="width:80px;height:48px";var m=p.getContext("2d");return m.font="bold "+9*o+"px Helvetica,Arial,sans-serif",m.textBaseline="top",m.fillStyle=e,m.fillRect(0,0,r,a),m.fillStyle=i,m.fillText(t,l,c),m.fillRect(d,u,f,y),m.fillStyle=e,m.globalAlpha=.9,m.fillRect(d,u,f,y),{dom:p,update:function(a,x){s=Math.min(s,a),h=Math.max(h,a),m.fillStyle=e,m.globalAlpha=1,m.fillRect(0,0,r,u),m.fillStyle=i,m.fillText(n(a)+" "+t+" ("+n(s)+"-"+n(h)+")",l,c),m.drawImage(p,d+o,u,f-o,y,d,u,f-o,y),m.fillRect(d+f-o,u,o,y),m.fillStyle=e,m.globalAlpha=.9,m.fillRect(d+f-o,u,o,n((1-a/x)*y))}}},s)},function(t,i,e){"use strict";function s(t,i,e,s,h){return{x:Math.cos(h)*(t-e)-Math.sin(h)*(i-s)+e,y:Math.sin(h)*(t-e)+Math.cos(h)*(i-s)+s}}function h(t,i,e,h,n,o,r){const a=[],l=i*Math.sqrt(3)/2,c=r||1;a.push(s(h,n-2*l/3,h,n,e)),a.push(s(h+i/2,n+c*(l/3),h,n,e)),a.push(s(h-i/2,n+c*(l/3),h,n,e)),o&&(t.fillStyle=o),t.beginPath(),t.moveTo(a[0].x,a[0].y),t.lineTo(a[1].x,a[1].y),t.lineTo(a[2].x,a[2].y),t.lineTo(a[0].x,a[0].y),t.fill(),t.closePath()}function n(t,i,e,s,h,n,o,r,a){t.fillStyle=h,t.strokeStyle=o;const l=r||0,c=a||2*Math.PI;t.beginPath(),t.arc(i,e,s,l,c),null!==h&&t.fill(),t.closePath(),n&&o&&t.stroke()}function o(t,i,e,s,h,n,o){o&&(t.fillStyle=o),t.beginPath(),t.ellipse(i,e,s,h,n,0,2*Math.PI),t.fill(),t.closePath()}function r(t,i,e){return t*(1-e)+i*e}function a(t,i,e){return[Math.round(t[0]*(1-e)+i[0]*e),Math.round(t[1]*(1-e)+i[1]*e),Math.round(t[2]*(1-e)+i[2]*e)]}function l(t,i){console.log(t);const e=Math.ceil(t*(i.length-1)),s=(e-1)/(i.length-1),h=(t-s)/(e/(i.length-1)-s),n=c(i[e-1]),o=c(i[e]);return[Math.round(n[0]*(1-h)+o[0]*h),Math.round(n[1]*(1-h)+o[1]*h),Math.round(n[2]*(1-h)+o[2]*h)]}function c(t){var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return i?[parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16)]:null}function d(t){return"#"+((1<<24)+(t[0]<<16)+(t[1]<<8)+t[2]).toString(16).slice(1)}e.r(i);class u{constructor(t,i,e,s){this.x=t||x(50),this.y=i||g(50),this.size=e||g(1.5),this.diameter=2*this.size,this.vx=0,this.vy=0,this.theta=s||0,this.speedDelta=g(.0135),this.thetaDelta=g(.0145),this.rightPressed=!1,this.leftPressed=!1,this.upPressed=!1,this.downPressed=!1,this.bubble=!1,this.bubblePoppedTime=0,this.bubblePopped=!1}draw(t,i){t.fillStyle=M.goldFishTwo,t.beginPath(),t.arc(this.x,this.y,this.size,0,2*Math.PI),t.fill(),t.closePath();const e=1.5*this.size,h=e*Math.sqrt(3)/2,o=[[this.x,this.y+this.size/2],[this.x-e/2,this.y+h+this.size/2],[this.x+e/2,this.y+h+this.size/2],[this.x,this.y+this.size/2]];if(t.beginPath(),o.map((i,e)=>{const h=s(i[0],i[1],this.x,this.y,this.theta);0===e?t.moveTo(h.x,h.y):t.lineTo(h.x,h.y)}),t.closePath(),t.fill(),this.bubble)if(this.bubblePopped){const e=d(l(.5+.5*Math.sin(i/50),["#FFFFFF",M.blueTwo]));console.log(e),t.lineWidth=2,n(t,this.x,this.y,1.15*this.size,null,!0,e),n(t,this.x,this.y,1.1*this.size,null,!0,e,0,Math.PI/8),i>this.bubblePoppedTime+2500&&(this.bubble=!1,this.bubblePopped=!1)}else n(t,this.x,this.y,1.15*this.size,null,!0,"#FFFFFF"),n(t,this.x,this.y,1.1*this.size,null,!0,"#FFFFFF",0,Math.PI/8)}reposition(){this.leftPressed&&(this.vx-=this.speedDelta,this.theta>Math.PI/2?this.theta=r(this.theta,3*Math.PI/2,this.thetaDelta):this.theta<=Math.PI/2&&(this.theta=r(this.theta,-Math.PI/2,this.thetaDelta))),this.upPressed&&(this.vy-=this.speedDelta,this.theta<Math.PI&&this.theta>=0?this.theta=r(this.theta,0,this.thetaDelta):this.theta=r(this.theta,2*Math.PI,this.thetaDelta)),this.rightPressed&&(this.vx+=this.speedDelta,this.theta<3*Math.PI/2&&this.theta>=Math.PI/2?this.theta=r(this.theta,Math.PI/2,this.thetaDelta):this.theta>=3*Math.PI/2?this.theta=r(this.theta,5*Math.PI/2,this.thetaDelta):this.theta=r(this.theta,Math.PI/2,this.thetaDelta)),this.downPressed&&(this.vy+=this.speedDelta,this.theta=r(this.theta,Math.PI,this.thetaDelta)),this.theta>2*Math.PI?this.theta=this.theta-2*Math.PI:this.theta<0&&(this.theta=2*this.theta+2*Math.PI),this.x+=this.vx,this.y+=this.vy,this.x>=m+this.size?this.x=-this.size:this.x<=-this.size&&(this.x=m+this.size),this.y>=g(100)-this.size?(this.y=g(100)-this.size,this.vy=-.33*this.vy):this.y<=g(0)+this.size&&(this.y=g(0)+this.size,this.vy=-.33*this.vy)}render(t,i){this.reposition(),this.draw(t,i)}}const f=document.getElementById("canvas"),y=f.getContext("2d");let p=f.clientHeight,m=f.clientWidth;const x=t=>t*m/100,g=t=>t*p/100,M={blueOne:"#69D2E7",blueTwo:"#A7DBD8",goldFishOne:"#F38630",goldFishTwo:"#FA6900",testing:["#ffffcc","#d9f0a3","#addd8e","#78c679","#31a354","006837"],simpleFish:["#f3beb4","#b86454"],jumperFish:["#87a8eb","#4966a1"],pufferFish:["#E0E4CC"],pufferFishTail:"#c9cdb7",pufferFishMouth:"#f0b1a5"},b=[];b.push(...new Array(1).fill("puffer")),b.push(...new Array(6).fill("jumper")),b.push(...new Array(16).fill("simple"));let z=[],P=[],v=[];const w={active:!0,fishEaten:0,score:0,progress:0,elapsed:0,enemyCount:25},I=new u;class T{constructor(t,i,e,s,h,n,o){this.cycleTime=i,this.direction=n,this.color=o,this.size=t,this.vertices=4,this.x=s,this.y=h,this.vx=e,this.collision,this.state=[{start:0,end:.3,speed:this.vx,value:"coil"},{start:.2,end:.99,speed:5*this.vx,value:"jump"},{start:.75,end:1,speed:2*this.vx,value:"coil"}],this.coords={neutral:[[-t/2,0],[0,-t/2],[t/2,0],[0,t/2]],coil:[[-t/2,0],[0,-t],[t/2,0],[0,t]],jump:[[-t,0],[0,-t/2],[t,0],[0,t/2]]},this.currentCoords,this.diameter,this.dispose}reposition(t){const i=t%this.cycleTime/this.cycleTime,e=this.state.filter(t=>t.start<=i&&t.end>i),s=e.length>1?"transition":"stable",h=[];for(let t=0;t<this.vertices;t++){h[t]=[this.x,this.y];const n=new Array(2);if("transition"===s){const s=e[0],h=e[1];let o;s.start===h.start&&s.end<=h.end?o=(i-s.start)/(s.end-s.start):s.start<=h.start&&s.end<h.end?o=(i-h.start)/(s.end-h.start):s.start<h.start&&s.end===h.end&&(o=(i-h.end)/(h.end-h.start));const a=r(s.speed,h.speed,o);"left"===this.direction?this.x-=a:this.x+=a,n[0]=r(this.coords[s.value][t][0],this.coords[h.value][t][0],o),n[1]=r(this.coords[s.value][t][1],this.coords[h.value][t][1],o)}else{const i=e[0],s=i.speed;"left"===this.direction?this.x-=s:this.x+=s,n[0]=this.coords[i.value][t][0],n[1]=this.coords[i.value][t][1]}h[t][0]+=n[0],h[t][1]+=n[1]}this.currentCoords=h}collisionDetection(t,i,e){for(let s=0;s<this.currentCoords.length-1;s++){const h=e*e;let n=Math.pow(t-this.currentCoords[s][0],2),o=Math.pow(i-this.currentCoords[s][1],2);if(n+o<h)return!0;const r=(this.currentCoords[s][0]+this.currentCoords[s+1][0])/2,a=(this.currentCoords[s][1]+this.currentCoords[s+1][1])/2;if((n=(t-r)*(t-r))+(o=(i-a)*(i-a))<h)return!0}return!1}calculateDiameter(){const t=Math.abs(this.currentCoords[0][0]-this.currentCoords[2][0]),i=Math.abs(this.currentCoords[1][1]-this.currentCoords[2][1]);return Math.max(t,i)}draw(t){t.fillStyle=this.color,t.beginPath(),this.currentCoords.map((i,e)=>{0===e?t.moveTo(i[0],i[1]):t.lineTo(i[0],i[1])}),t.fill(),t.closePath()}render(t,i,e,s,h){this.reposition(i),this.diameter=this.calculateDiameter(),(this.x+this.size<x(0)||this.x-this.size>x(100))&&(this.dispose=!0),(Math.abs(e-this.x)<4*this.size||Math.abs(s-this.y)<4*this.size)&&(this.collision=this.collisionDetection(e,s,h)),this.draw(t)}}class F{constructor(t,i,e,s,h,n,o){this.size=t,this.diameter=2*t,this.cycleTime=i,this.vx=e,this.x=s,this.y=h,this.direction=n,this.color=o,this.vertices=4,this.tailSide=1.3*this.size,this.tailHeight=this.tailSide*Math.sqrt(3)/2,this.coords=[[0,this.tailSide/2],[-this.tailSide/2,this.tailHeight+this.size/2],[this.tailSide/2,this.tailHeight+this.size/2],[0,this.tailSide/2]],this.currentCoords,this.collision,this.dispose=!1,this.sideEye=!1,this.eyeAngle=0}reposition(t){const i=[];"left"===this.direction?this.x-=this.vx:this.x+=this.vx,this.coords.map((e,h)=>{const n=this.x+e[0],o=this.y+e[1];let r;r="left"===this.direction?-Math.PI/2:Math.PI/2;const a=Math.PI/16*Math.sin(t/this.cycleTime),l=s(n,o,this.x,this.y,r+a);i.push([l.x,l.y])}),this.currentCoords=i}collisionDetection(t,i){this.collision=t<i}draw(t){const i=d(a(c(this.color),[0,0,0],.15));t.fillStyle=this.color,t.beginPath(),t.arc(this.x,this.y,this.size,0,2*Math.PI),t.fill(),t.closePath(),t.beginPath(),this.currentCoords.map((i,e)=>{0===e?t.moveTo(i[0],i[1]):t.lineTo(i[0],i[1])}),t.fill(),t.closePath(),n(t,"left"===this.direction?this.x-.55*this.size:this.x+.55*this.size,this.y-this.size/6,this.size/8,"#ffffff");const e="left"===this.direction?this.y-this.size/6-(this.sideEye?Math.sin(this.eyeAngle+Math.PI)*this.size/12:0):this.y-this.size/6-(this.sideEye?Math.sin(this.eyeAngle-Math.PI)*this.size/12:0),s="left"===this.direction?this.x-.55*this.size-(this.sideEye?Math.cos(this.eyeAngle+Math.PI)*this.size/12:0):this.x+.55*this.size-(this.sideEye?Math.cos(this.eyeAngle-Math.PI)*this.size/12:0);n(t,s,e,this.size/16,this.color);const h=["left"===this.direction?this.x-Math.cos(1.9*Math.PI)*this.size*.99:this.x+Math.cos(1.9*Math.PI)*this.size*.99,(this.direction,this.y-Math.sin(1.9*Math.PI)*this.size*.99)];t.strokeStyle=i,t.lineWidth=this.size/24,t.beginPath(),t.moveTo(h[0],h[1]),t.lineTo("left"===this.direction?h[0]+this.size/4:h[0]-this.size/4,h[1]),t.closePath(),t.stroke()}render(t,i,e,s,h){this.reposition(i),(this.x+this.size<x(0)||this.x-this.size>x(100))&&(this.dispose=!0);const n=(this.x-e)*(this.x-e)+(this.y-s)*(this.y-s),o=(this.size+h)*(this.size+h);n<2*o&&this.collisionDetection(n,o),n<24*o?(this.sideEye=!0,this.eyeAngle=Math.atan2(s-this.y,e-this.x)):this.sideEye=!1,this.draw(t)}}class S{constructor(t,i,e,s,h,n,o){this.cycleTime=i,this.direction=n,this.color=o,this.size=t,this.x=s,this.y=h,this.vx=e,this.state=[{start:0,end:.6,radius:this.size,speed:1.2*this.vx,value:"neutral"},{start:.5,end:.65,radius:this.size,speed:.75*this.vx,value:"huffing"},{start:.6,end:1,radius:3*this.size,speed:.5*this.vx,value:"puffing"},{start:.95,end:1,radius:this.size,speed:this.vx,value:"neutral"}],this.collision,this.currentState,this.currentCoords,this.diameter,this.dispose}reposition(t){const i=t%this.cycleTime/this.cycleTime;this.currentState=this.state.filter(t=>t.start<=i&&t.end>i);if("transition"===(this.currentState.length>1?"transition":"stable")){const t=this.currentState[0],e=this.currentState[1];let s;t.start===e.start&&t.end<=e.end?s=(i-t.start)/(t.end-t.start):t.start<=e.start&&t.end<e.end?s=(i-e.start)/(t.end-e.start):t.start<e.start&&t.end===e.end&&(s=(i-e.start)/(e.end-e.start));const h=r(t.speed,e.speed,s);"left"===this.direction?this.x-=h:this.x+=h;const n=r(t.radius,e.radius,s);this.size=n}else{const t=this.currentState[0],i=t.speed;"left"===this.direction?this.x-=i:this.x+=i,this.size=t.radius}this.finSize=this.size/2,this.finHeight=this.finSize*Math.sqrt(3)/2,this.currentCoords=[]}collisionDetection(t,i,e){const s=(this.x-t)*(this.x-t)+(this.y-i)*(this.y-i),h=(this.size+e)*(this.size+e);this.collision=s<h}render(t,i,e,s,r){this.reposition(i),this.diameter=2*this.size;const a=.25*Math.sin(this.vx*i/50),l=this.currentState.filter(t=>"huffing"===t.value).length>0?1+.25*Math.abs(Math.sin(i/100)):1;(this.x+this.size<x(0)||this.x-this.size>x(100))&&(this.dispose=!0),(Math.abs(this.x-e)<4*r||Math.abs(this.y-s)<4*r)&&this.collisionDetection(e,s,r),function(t,i,e,s,n,o,r){for(let a=0;a<i;a++){const l=2*Math.PI*(a/i);h(t,e,Math.PI/2+l,s+Math.cos(l)*o,n+Math.sin(l)*o,r)}}(t,25,this.size/8,this.x,this.y,this.size,M.pufferFish[0]),o(t,"left"===this.direction?this.x-this.size:this.x+this.size,this.y,l*(this.size/8),l*(this.size/3.4),0,M.pufferFishMouth),h(t,this.size,"left"===this.direction?-Math.PI/2:Math.PI/2,"left"===this.direction?this.x+this.size:this.x-this.size,this.y,M.pufferFishTail),n(t,this.x,this.y,this.size,M.pufferFish[0]),h(t,this.size/2,"left"===this.direction?-Math.PI/2:Math.PI/2,"left"===this.direction?this.x+this.size/4:this.x-this.size/4,this.y,M.pufferFishTail,a),o(t,"left"===this.direction?this.x-this.size/1.75:this.x+this.size/1.75,this.y-this.size/3,this.size/6,this.size/5,0,"#FFFFFF"),o(t,"left"===this.direction?this.x-this.size/1.75:this.x+this.size/1.75,this.y-this.size/3,this.size/12,this.size/10,0,M.pufferFishTail)}}class C{constructor(){this.x=x(5)+x(90)*Math.random(),this.y=g(0),this.vy=g(.2),this.xVariation=x(.25),this.cycleTime=200,this.collision=!1,this.color="#FFD700",this.rotation=0,this.size=g(2)}reposition(t){this.x=this.x+this.xVariation*Math.sin(t/this.cycleTime),this.y=this.y+Math.max(.1*-this.vy,Math.abs(Math.sin(t/this.cycleTime))*this.vy),this.rotation-=Math.sin(t/this.cycleTime)*this.vy/50,this.y>=g(100)&&(this.dispose=!0)}collisionDetection(t,i){this.collision=t<i}draw(t,i){!function(t,i,e,h,n,o){const r=2*Math.PI,a=[];a.push(s(i+Math.cos(5*r/5)*h,e+Math.sin(5*r/5)*h,i,e,o)),a.push(s(i+Math.cos(3*r/5)*h,e+Math.sin(3*r/5)*h,i,e,o)),a.push(s(i+Math.cos(1*r/5)*h,e+Math.sin(1*r/5)*h,i,e,o)),a.push(s(i+Math.cos(4*r/5)*h,e+Math.sin(4*r/5)*h,i,e,o)),a.push(s(i+Math.cos(2*r/5)*h,e+Math.sin(2*r/5)*h,i,e,o)),a.push(s(i+Math.cos(0*r/5)*h,e+Math.sin(0*r/5)*h,i,e,o)),t.fillStyle=n,t.beginPath(),a.map((i,e)=>{0===e?t.moveTo(i.x,i.y):t.lineTo(i.x,i.y)}),t.closePath(),t.fill()}(t,this.x,this.y,this.size,this.color,this.rotation)}render(t,i,e,s,h){this.reposition(i);const n=(this.x-e)*(this.x-e)+(this.y-s)*(this.y-s),o=(this.size+h)*(this.size+h);this.collisionDetection(n,o),this.draw(t,i)}}class E{constructor(){this.x=x(5)+x(90)*Math.random(),this.y=g(100),this.vy=g(.2),this.collision=!1,this.color="#FFFFFF",this.size=g(3),this.type="bubble",this.dispose=!1}draw(t){n(t,this.x,this.y,this.size,null,!0,this.color),n(t,this.x,this.y,.9*this.size,null,!0,this.color,0,Math.PI/8)}collisionDetection(t,i){this.collision=t<i}reposition(){this.y-=this.vy,this.y<=g(0)&&(this.dispose=!0)}render(t,i,e,s,h){this.reposition(i);const n=(this.x-e)*(this.x-e)+(this.y-s)*(this.y-s),o=(this.size+h)*(this.size+h);this.collisionDetection(n,o),this.draw(t,i)}}class H{constructor(t,i,e){this.x=t,this.y=i,this.size=e,this.width=e/10,this.cycleTime=500,this.numPoints=16}draw(t,i){const e=i/this.cycleTime;t.strokeStyle="#006837",t.fillStyle="#006837",t.beginPath(),t.moveTo(this.x-this.width/2,g(100));for(let i=0;i<this.numPoints;i++){const s=this.width*(i/this.numPoints);t.lineTo(this.x-this.width+s+this.width/4*Math.sin(e%this.cycleTime+2*Math.PI*i/this.numPoints*3),g(100)-this.size*(i/this.numPoints))}for(let i=this.numPoints;i>=0;i--){const s=this.width*(i/this.numPoints);t.lineTo(this.x+this.width-s+this.width/4*Math.sin(e%this.cycleTime+2*Math.PI*i/this.numPoints*3),g(100)-this.size*(i/this.numPoints))}t.closePath(),t.stroke(),t.fill()}render(t,i){this.draw(t,i)}}var D=e(0);const k=new(e.n(D).a);var A;function W(t){if(k.begin(),y.clearRect(0,0,m,p),y.fillStyle=M.blueOne,y.fillRect(0,0,m,p),I.render(y,t),z.length<w.enemyCount&&Math.random()>.6){switch(b[Math.floor(Math.random()*b.length)]){case"simple":{const{size:t,cycleTime:i,speed:e,x:s,y:h,direction:n,color:o}=function(){const t=g(1),i=g(7),e=t+g(6)*Math.random(),s=30+e,h=x(.05)-e/100+Math.random()*x(.075),n=Math.random()>=.5?"left":"right";return{size:e,cycleTime:s,speed:h,x:"right"===n?-e:x(100)+e,y:Math.random()*g(100),direction:n,color:d(l((e-t)/(i-t),M.testing))}}();z.push(new F(t,i,e,s,h,n,o));break}case"jumper":{const{size:t,cycleTime:i,speed:e,x:s,y:h,direction:n,color:o}=function(){const t=g(3),i=g(6.5),e=t+i*Math.random(),s=2500+10*e,h=x(.008),n=Math.random()>=.5?"left":"right";return{size:e,cycleTime:s,speed:h,x:"right"===n?-e:x(100)+e,y:Math.random()*g(100),direction:n,color:d(a(c(M.jumperFish[0]),c(M.jumperFish[1]),(e-t)/(i-t)))}}();z.push(new T(t,i,e,s,h,n,o));break}case"puffer":{const{size:t,cycleTime:i,speed:e,x:s,y:h,direction:n,color:o}=function(){const t=g(3)+g(5)*Math.random(),i=8500+10*t,e=x(.015)+Math.random()*x(.025),s=Math.random()>=.5?"left":"right";return{size:t,cycleTime:i,speed:e,x:"right"===s?-t:x(100)+t,y:Math.random()*g(100),direction:s,color:M.pufferFish}}();z.push(new S(t,i,e,s,h,n,o))}}}const i=[];z.map((e,s)=>{e.render(y,t,I.x,I.y,I.size),e.collision&&(e.diameter<I.diameter?(i.push(s),I.size+=e.diameter/20,I.diameter=2*I.size,w.fishEaten++,w.score+=1e3*e.diameter/g(100),w.progress=I.diameter/g(100),B(),5===w.fishEaten&&b.push("puffer"),15===w.fishEaten&&b.push("puffer")):I.bubble?(I.bubblePopped=!0,I.bubblePoppedTime=t):I.bubblePopped||(w.active=!1)),!0===e.dispose&&i.push(s)});for(let t=0;t<i.length;t++)z.splice(i[t],1);Math.random()<1e-4&&P.push(new C),Math.random()<1e-4&&P.push(new E);const e=[];P.map((i,s)=>{i.render(y,t,I.x,I.y,I.size),i.collision&&(e.push(s),w.score+=500,B(),"bubble"===i.type&&(I.bubble=!0)),i.dispose&&e.push(s)});for(let t=0;t<e.length;t++)P.splice(e[t],1);v.map(i=>{i.render(y,t)}),k.end(),w.active&&requestAnimationFrame(W)}function B(){document.getElementById("count").innerText=w.fishEaten,document.getElementById("score").innerText=Number(Math.round(w.score)).toLocaleString("en"),document.getElementById("progress").style.width=`${6*w.progress}vw`}function j(t){switch(t.which||t.keyCode){case 37:I.leftPressed=!0;break;case 38:I.upPressed=!0;break;case 39:I.rightPressed=!0;break;case 40:I.downPressed=!0}}function O(t){switch(t.which||t.keyCode){case 37:I.leftPressed=!1;break;case 38:I.upPressed=!1;break;case 39:I.rightPressed=!1;break;case 40:I.downPressed=!1}}function R(){document.getElementById("intro").style.visibility="hidden",document.getElementById("blur").style.visibility="hidden",document.getElementById("title").style.visibility="visible",document.getElementById("canvas").style.visibility="visible",document.getElementById("stats").style.visibility="visible",W(0)}f.height=p,f.width=m,k.showPanel(0),document.body.append(k.dom),v.push(new H(x(50),g(100),g(10))),document.getElementById("start-button").onclick=R,document.addEventListener("keydown",j,!1),document.addEventListener("keyup",O,!1),document.addEventListener("resize",()=>{height=f.clientHeight,width=f.clientWidth,f.width=width,f.height=height},!1),function(){let t=x(1);const i=document.createElement("canvas");i.width=t,i.height=t;const e=i.getContext("2d");e.lineWidth=x(.05),e.fillStyle=M.pufferFishTail,e.fillRect(0,0,t,t),e.strokeStyle="#ffffff",e.moveTo(0,0),e.lineTo(t/2,t/2),e.lineTo(t,0),e.stroke();const s=document.getElementById("canvas-background"),h=s.getContext("2d");s.width=s.clientWidth,s.height=s.clientHeight,h.fillStyle=h.createPattern(i,"repeat"),h.rect(0,0,s.width,s.height),h.fill();for(let t=0;t<48;t++)v.push(new H(Math.random()*x(100),g(100),g(8)+Math.random()*g(5)))}(),(A=!1)||R(),A&&(document.getElementById("blur").style.visibility="visible",Array.from(document.getElementsByClassName("info-canvas")).forEach(t=>{switch(t.height=t.clientHeight,t.width=t.clientWidth,t.id){case"intro-avoid":{const i=new F(t.clientHeight/3,1,1,4.5*t.clientWidth/10,t.clientHeight/2,"right","#addd8e");i.reposition(0),i.draw(t.getContext("2d"));const e=new u(5.5*t.clientWidth/10,t.clientHeight/2,t.clientHeight/8,Math.PI/2);e.reposition(),e.draw(t.getContext("2d"));break}case"intro-eat":{const i=new F(t.clientHeight/10,1,1,4.75*t.clientWidth/10,t.clientHeight/2,"right","#d9f0a3");i.reposition(0),i.draw(t.getContext("2d"));const e=new u(5.25*t.clientWidth/10,t.clientHeight/2,t.clientHeight/8,3*Math.PI/2);e.reposition(),e.draw(t.getContext("2d"));break}case"intro-odd":{const i=new T(t.clientHeight/3,1,1,5*t.clientWidth/10-1.2*t.clientHeight,t.clientHeight/2,"right","#87a8eb");i.reposition(0),i.draw(t.getContext("2d"));const e=new u(5*t.clientWidth/10-t.clientHeight/3,t.clientHeight/2,t.clientHeight/4,Math.PI/2);e.reposition(),e.draw(t.getContext("2d"));const s=new T(t.clientHeight/5,1,1,5*t.clientWidth/10+t.clientHeight/2,t.clientHeight/2,"right","#87a8eb");s.reposition(0),s.draw(t.getContext("2d"));const h=new u(5*t.clientWidth/10+t.clientHeight,t.clientHeight/2,t.clientHeight/4,3*Math.PI/2);h.reposition(),h.draw(t.getContext("2d"));break}case"intro-tails":{const i=new F(t.clientHeight/2.3,1,1,5*t.clientWidth/10-t.clientHeight/2,t.clientHeight/2,"left","#addd8e");i.reposition(0),i.draw(t.getContext("2d"));const e=new u(5*t.clientWidth/10+t.clientHeight/2,t.clientHeight/2,t.clientHeight/4,Math.PI/2);e.reposition(),e.draw(t.getContext("2d"));break}case"intro-bonus":break;case"intro-win":{const i=new u(5*t.clientWidth/10,t.clientHeight/2,t.clientHeight,0);i.reposition(),i.draw(t.getContext("2d"));break}}}),document.getElementById("intro").style.visibility="visible")}]);